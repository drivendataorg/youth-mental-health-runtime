[project]
name = "youth-mental-health-runtime"
channels = ["nvidia", "conda-forge", "pytorch", "xformers"]
platforms = ["linux-64"]

[dependencies]

# BASE DEPENDENCIES
[feature.base]
[feature.base.dependencies]
accelerate = "0.25.0"
aiofiles = "23.2.1"
aiohttp = "3.8.5"
diskcache = "5.6.3"
einops = "0.7.0"
gensim = "4.3.2"
jsonpickle = "3.0.2"
keras = "*"
lightgbm = "4.1.0"
loguru = "0.7"
numba = "0.58.*"
numpy = "1.25.2"
pandas = "2.1.3"
pip = "23.3"
pytest = "7.4"
python = "3.10.13"
pytorch-lightning = "2.1.1"
ray-default = "2.8.1"
scikit-learn = "1.3.2"
scipy = "1.9.3"
sentencepiece = "0.1.99"
spacy = "3.7.2"
statsmodels = "0.14.0"
tqdm = "4.66"
transformers = "4.35.2"

# CPU DEPENDENCIES
[feature.cpu]
[feature.cpu.dependencies]
cpuonly = {channel = "pytorch"} # PyTorch metapackage for CPU-only
pytorch = {version = "2.1.1", channel = "pytorch"}
tensorflow = {version = "2.13.1", build="cpu_py310*"}

# GPU DEPENDENCIES
[feature.gpu]
system-requirements = {cuda = "11.8"}
[feature.gpu.dependencies]
cudatoolkit = {version = "11.8", channel = "conda-forge"}
cuda-cudart = {version = "11.8.*", channel = "nvidia"}
cuda-version = {version = "11.8", channel = "conda-forge"}
cudnn = {version = "*", channel = "conda-forge"}
cupy = {version = "12.*"}
pytorch = {version = "2.1.1", channel = "pytorch"}
pytorch-cuda = {version = "11.8", channel = "pytorch"} # PyTorch metapackage for cuda version
tensorflow = {version = "2.13.1", build="cuda118py310*"}
xformers = {version = "0.0.23", channel = "xformers"}

[environments]
cpu = { features = ["base", "cpu"]}
gpu = { features = ["base", "gpu"]}
