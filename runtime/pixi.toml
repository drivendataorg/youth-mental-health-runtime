[project]
name = "youth-mental-health-runtime"
channels = ["nvidia", "conda-forge", "pytorch", "xformers"]
platforms = ["linux-64"]

[dependencies]

# BASE DEPENDENCIES
[feature.base]
[feature.base.dependencies]
accelerate = "0.33.0"
bitsandbytes = "0.43.3"
einops = "0.8.0"
gensim = "4.3.2"
jsonpickle = "3.2.2"
langchain = "0.2.14"
llama-cpp-python = "0.2.24"
loguru = "0.7.*"
nltk = "3.9.1"
numba = "0.60.*"
numpy = "1.26.4"
pandas = "2.2.2"
pip = "24.2"
pytest = "8.3.*"
python = "3.10.14"
pytorch-lightning = "2.4.0"
scikit-learn = "1.5.1"
scipy = "1.14.1"
sentencepiece = "0.2.0"
spacy = "3.7.5"
tqdm = "4.66.*"
transformers = "4.44.2"

# [feature.base.pypi-dependencies]
# vllm = { url = "https://github.com/vllm-project/vllm/releases/download/v0.4.0/vllm-0.4.0+cu118-cp310-cp310-manylinux1_x86_64.whl" }

# CPU DEPENDENCIES
[feature.cpu]
[feature.cpu.dependencies]
cpuonly = {channel = "pytorch"} # PyTorch metapackage for CPU-only
pytorch = {version = "2.1.2", channel = "pytorch"}

# GPU DEPENDENCIES
[feature.gpu]
system-requirements = {cuda = "11.8"}
[feature.gpu.dependencies]
cudatoolkit = {version = "11.8", channel = "conda-forge"}
cuda-cudart = {version = "11.8.*", channel = "nvidia"}
cuda-version = {version = "11.8", channel = "conda-forge"}
cudnn = {version = "*", channel = "conda-forge"}
cupy = {version = "12.*"}
pytorch = {version = "2.1.2", channel = "pytorch"}
pytorch-cuda = {version = "11.8", channel = "pytorch"} # PyTorch metapackage for cuda version
xformers = {version = "0.0.23.post1", channel = "xformers"}

[environments]
cpu = { features = ["base", "cpu"]}
gpu = { features = ["base", "gpu"]}
